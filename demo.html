<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.js"></script>
<script src="windrose.js"></script>
<link rel="stylesheet" href="windrose.css"></script>
<style>
#wind {
    display: block;
    max-width: 90vw;
    max-height: 90vh;
    border: 1px solid gray;
}
</style>
<script>
function initialize() {
    let wind = new WindRose(document.getElementById("wind"), {
        max_data_count: 10
    });
    if (false) {
        let rot = 0;
        setInterval(() => {
            wind.update({dir:rot, speed:3});
            rot += 10;
        }, 1000);
    } else {
        wind.subscribe("https://test.com/ws/", "/anemometer");
    }
}
document.addEventListener("DOMContentLoaded", initialize);
</script>
</head>

<body>
 <svg id="wind" viewBox="0 0 2000 2300"></svg>
</body>
</html>
